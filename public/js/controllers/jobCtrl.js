clanApp.controller("jobCtrl",["$scope","$http",function(e,o){e.jobs=[],e.currentPage=1,e.lastPage=0,e.totalItens=0,e.maxSize=5,e.itensPerPage=10,e.dadoPesquisa="",e.campos="id, title",e.campoPesquisa="title",e.processandoListagem=!1,e.processandoExcluir=!1,e.ordem="title",e.sentidoOrdem="asc";var r=!1;e.$watch("currentPage",function(){r&&s()}),e.$watch("itensPerPage",function(){r&&s()}),e.$watch("dadoPesquisa",function(){r&&s()});var s=function(){e.processandoListagem=!0,o({url:"/listar-jobs/",method:"GET",params:{page:e.currentPage,itensPorPagina:e.itensPerPage,dadoPesquisa:e.dadoPesquisa,campos:e.campos,campoPesquisa:e.campoPesquisa,ordem:e.ordem,sentido:e.sentidoOrdem}}).success(function(o,s,a,i){e.jobs=o.data,e.lastPage=o.last_page,e.totalItens=o.total,e.primeiroDaPagina=o.from,e.ultimoDaPagina=o.to,r=!0,e.processandoListagem=!1}).error(function(o){e.message="Ocorreu um erro: "+o,e.processandoListagem=!1})};e.ordernarPor=function(o){e.ordem=o,"asc"==e.sentidoOrdem?e.sentidoOrdem="desc":e.sentidoOrdem="asc",s()},e.validar=function(){},s(),e.mostrarForm=!1,e.inserir=function(){o.post("inserir-job",e.job).success(function(e){s()}).error(function(o){e.messageInserir="Ocorreu um erro: "+o})},e.validar=function(e){return void 0===e?"campo-obrigatorio":""},e.perguntaExcluir=function(o,r){e.idExcluir=o,e.tituloExcluir=r,e.excluido=!1,e.mensagemExcluido=""},e.excluir=function(r){e.processandoExcluir=!0,o({url:"/excluir-job/"+r,method:"GET"}).success(function(o,r,a,i){e.processandoExcluir=!1,e.excluido=!0,e.mensagemExcluido="Exclu√≠do com sucesso!",s()}).error(function(o){e.message="Ocorreu um erro: "+o,e.processandoExcluir=!1,e.mensagemExcluido="Erro ao tentar excluir!"})}}]);